<div class="container">
  <div class="row mb-3">
    <h2>Gestion des pré requis</h2>
  </div>
  <div class="row">
    <div class="col-md-4 col-requirement">
      <div class="requirement-panel">
        <h4>Module concerné</h4>
        <div class="form-group row">
          <label class="col-lg-4 col-form-label">Titre :</label>
          <div class="col-lg-8">
            <ng-select
              [items]="dataTitres"
              bindLabel="libelleLong"
              bindValue="codeTitre"
              placeholder="Saisir le titre"
              notFoundText="Aucun titre trouvé"
              (change)="selectTitreSource()"
              [(ngModel)]="sourceCodeTitre">
            </ng-select>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-lg-4 col-form-label">Formation :</label>
          <div class="col-lg-8">
            <ng-select
              [items]="dataFormations"
              bindLabel="libelleLong"
              bindValue="codeFormation"
              placeholder="Saisir la formation"
              notFoundText="Aucune formation trouvée"
              (change)="selectFormationSource()"
              [(ngModel)]="sourceFormation">
            </ng-select>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-lg-4 col-form-label">Module :</label>
          <div class="col-lg-8">
            <input type="text" class="form-control" placeholder="Saisir le module" [(ngModel)]="sourceModule" (keyup)="findModuleSource()"/>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <span><u>Résultat(s):</u></span>
            <div class="lstSource">
              <div *ngFor="let m of sourcesModules" class="col item_module over_green" (click)="clickSource(m)">
                <i class="fas fa-cube"></i> {{ m.libelle }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-requirement">
      <div class="requirement-panel">
        <h4>Ajouter un Pré requis à</h4>
        <div *ngIf="sourceSelected" class="col item_module">
          <i class="fas fa-cube"></i> {{ sourceSelected.libelle }}
        </div>
        <div *ngIf="!sourceSelected" class="col item_module item_none">
          <i class="fas fa-exclamation"></i> Sélectionnez le module concerné
        </div>
        <div class="form-group row">
          <label class="col-lg-4 col-form-label">Titre :</label>
          <div class="col-lg-8">
            <ng-select
              [items]="dataTitres"
              bindLabel="libelleLong"
              bindValue="codeTitre"
              placeholder="Saisir le titre"
              notFoundText="Aucun titre trouvé"
              (change)="selectTitreTarget()"
              [(ngModel)]="targetCodeTitre">
            </ng-select>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-lg-4 col-form-label">Formation :</label>
          <div class="col-lg-8">
            <ng-select
              [items]="dataFormations"
              bindLabel="libelleLong"
              bindValue="codeFormation"
              placeholder="Saisir la formation"
              notFoundText="Aucune formation trouvée"
              (change)="selectFormationTarget()"
              [(ngModel)]="targetFormation">
            </ng-select>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-lg-4 col-form-label">Module :</label>
          <div class="col-lg-8">
            <input type="text" class="form-control" placeholder="Saisir le module" [(ngModel)]="targetModule" (keyup)="findModuleTarget()"/>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <div>
              <span><u>Résultat(s):</u></span>
              <div style="float: right;margin-right: 5px;">
                <label><input type="radio" name="requirementOrOperator" [(ngModel)]="requirementOrOperator" [value]="true"/> Et</label>
                <label><input type="radio" name="requirementOrOperator" [(ngModel)]="requirementOrOperator" [value]="false"/> Ou</label>
              </div>
            </div>
            <div class="lstTarget">
              <div *ngFor="let m of filterTargetModules(targetModules)" class="col item_module item_result purple" (click)="addRequirement(m)">
                <i class="fas fa-cube"></i> {{ m.libelle }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4 col-requirement">
      <div class="requirement-panel">
        <h4>Pré requis</h4>
        <div>
          <div *ngFor="let r of sourceRequirementSelected; first as isFirst">
            <div *ngIf="!isFirst">
              <div *ngIf="r.or" class="col text-center">
                <div class="ico_and">
                  <i class="fas fa-plus-square"></i>
                </div>
              </div>
              <div *ngIf="!r.or" class="col text-center">
                <div class="ico_or">
                  <i class="fas fa-chevron-left"></i>
                  Ou
                  <i class="fas fa-chevron-right"></i>
                </div>
              </div>
            </div>
            <div class="col item_module item_select">
              <i class="fas fa-crosshairs"></i> {{ getLibelleModule(r.moduleId) }}
              <i class="fas fa-times-circle ico_delete"></i>
            </div>
          </div>
          
          <!--<div class="col item_module item_select">
            <i class="fas fa-crosshairs"></i> Téléphonie IP et Messagerie
            <i class="fas fa-times-circle ico_delete"></i>
          </div>
          <div class="col text-center">
            <div class="ico_and">
              <i class="fas fa-plus-square"></i>
            </div>
          </div>
          <div class="col item_module item_select">
            <i class="fas fa-crosshairs"></i> Développement Web côté client
            <i class="fas fa-times-circle ico_delete"></i>
          </div>
          <div class="col text-center">
            <div class="ico_or">
              <i class="fas fa-chevron-left"></i>
              Ou
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
          <div class="col item_module item_select">
            <i class="fas fa-crosshairs"></i> ..................
            <i class="fas fa-times-circle ico_delete"></i>
          </div>-->
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-requirement">
      <div class="requirement-panel">
        <h4>Liste des pré requis</h4>
        <div class="form-group row">
          <label class="col-md-2 col-form-label">Module :</label>
          <div class="col-md-3">
            <input type="text" class="form-control" placeholder="Saisir le module" />
          </div>
          <label class="col-md-2 col-form-label">Pré requis :</label>
          <div class="col-md-5">
            <input type="text" class="form-control" placeholder="Saisir le module pré requis"/>
          </div>
        </div>
        <table class="table table-sm table-hover table-prerequis">
          <tr *ngFor="let m of moduleWithRequirement">
            <td class="first-col">
              <div class="item_module over_green item_module_liste">
                <i class="fas fa-cube"></i> {{ getLibelleModule(m.moduleId) }}
              </div>
            </td>
            <td>
              <div class="item_module item_show_liste">
                <i class="fas fa-crosshairs"></i> Téléphonie IP et Messagerie
              </div>
              <div class="item_ico_liste">
                <div class="ico_and">
                  <i class="fas fa-plus-square"></i>
                </div>
              </div>
              <div class="item_module item_show_liste">
                <i class="fas fa-crosshairs"></i> Développement Web côté client
              </div>
            </td>
          </tr>
          <tr>
            <td class="first-col">
              <div class="item_module over_green item_module_liste">
                <i class="fas fa-cube"></i> .....................
              </div>
            </td>
            <td>
              <div class="item_module item_show_liste">
                <i class="fas fa-crosshairs"></i> .................
              </div>
              <div class="item_ico_liste">
                <div class="ico_or">
                  <i class="fas fa-chevron-left"></i>
                  Ou
                  <i class="fas fa-chevron-right"></i>
                </div>
              </div>
              <div class="item_module item_show_liste">
                <i class="fas fa-crosshairs"></i> .................
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>
